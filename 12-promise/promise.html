<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Promise JS Async</title>
    </head>
    <body>
        <script>
            /**
             * Membuat Promise.
             * AJAX dengan promise.
             */
            {
                // Promise Resolve
                const promise = new Promise(function (resolve, reject) {
                    // AJAX
                    const ajax = new XMLHttpRequest();
                    ajax.open("GET", "api/konten.json");
                    ajax.onload = function () {
                        if (ajax.status === 200) {
                            resolve(JSON.parse(ajax.responseText));
                            resolve(ajax.responseText);
                        } else {
                            reject(
                                `Error, Get product with Response: ${ajax.responseText}`
                            );
                        }
                    };
                    ajax.send();
                });
                console.info(promise);
            }

            // Promise Tanpa Resolve dan reject.
            // Akan selalu Pending.
            {
                // Promise
                const promise = new Promise(function (resolve, reject) {
                    // AJAX
                    const ajax = new XMLHttpRequest();
                    ajax.open("GET", "api/konten.json");
                    ajax.onload = function () {
                        if (ajax.status === 200) {
                            // resolve(JSON.parse(ajax.responseText));
                            // resolve(ajax.responseText);
                        } else {
                            // reject(
                            //     `Error, Get product with Response: ${ajax.responseText}`
                            // );
                        }
                    };
                    ajax.send();
                });
                console.info(promise);
            }

            // Promise Reject.
            {
                // Promise
                const promise = new Promise(function (resolve, reject) {
                    // AJAX
                    const ajax = new XMLHttpRequest();
                    ajax.open("GET", "api/kontenSalah.json");
                    ajax.onload = function () {
                        if (ajax.status === 200) {
                            resolve(JSON.parse(ajax.responseText));
                            resolve(ajax.responseText);
                        } else {
                            reject(
                                `Error, Get product with Response: ${ajax.responseText}`
                            );
                        }
                    };
                    ajax.send();
                });
                console.info(promise);
            }
        </script>
    </body>
</html>
